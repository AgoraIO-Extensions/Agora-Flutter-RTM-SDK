/// GENERATED BY testcase_gen. DO NOT MODIFY BY HAND.

// ignore_for_file: deprecated_member_use,constant_identifier_names,unused_local_variable,unused_import,unnecessary_import

import 'package:agora_rtm/agora_rtm.dart' show AgoraRtmException;
import 'package:agora_rtm/src/bindings/gen/binding_forward_export.dart';
import 'package:agora_rtm/src/impl/rtm_result_handler_impl.dart';
import 'package:agora_rtm/src/bindings/native_iris_api_engine_binding_delegate.dart';
import 'package:agora_rtm/src/bindings/agora_rtm_client_impl_override.dart';

import 'package:flutter_test/flutter_test.dart';
import 'dart:typed_data';
import 'package:flutter/foundation.dart';

import 'package:iris_method_channel/iris_method_channel.dart';

void testCases(
    ValueGetter<List<InitilizationArgProvider>>
        irisMethodChannelInitilizationArgs) {
  Future<RtmClientImplOverride> _createBindingRtmClient() async {
    String appId = const String.fromEnvironment('TEST_APP_ID',
        defaultValue: '<YOUR_APP_ID>');
    final rtmResultHandler = RtmResultHandlerImpl();
    final client = RtmClientImplOverride.create(
      IrisMethodChannel(IrisApiEngineNativeBindingDelegateProvider()),
    );
    await client.initialize(
      appId,
      'user_id',
      rtmResultHandler.rtmEventHandler,
      args: irisMethodChannelInitilizationArgs(),
    );
    return client;
  }

  testWidgets(
    'RtmLock.setLock',
    (WidgetTester tester) async {
      final rtmClient = await _createBindingRtmClient();
      await rtmClient.setParameters('{"rtm.log_filter":2063}');
      final rtmLock = RtmLockImpl(rtmClient.getIrisMethodChannel());

      try {
        String channelName = "hello";
        RtmChannelType channelType = RtmChannelType.none;
        String lockName = "hello";
        int ttl = 5;
        await rtmLock.setLock(
          channelName: channelName,
          channelType: channelType,
          lockName: lockName,
          ttl: ttl,
        );
      } catch (e) {
        if (e is! AgoraRtmException) {
          debugPrint('[RtmLock.setLock] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtmClient.release();
    },
  );

  testWidgets(
    'RtmLock.getLocks',
    (WidgetTester tester) async {
      final rtmClient = await _createBindingRtmClient();
      await rtmClient.setParameters('{"rtm.log_filter":2063}');
      final rtmLock = RtmLockImpl(rtmClient.getIrisMethodChannel());

      try {
        String channelName = "hello";
        RtmChannelType channelType = RtmChannelType.none;
        await rtmLock.getLocks(
          channelName: channelName,
          channelType: channelType,
        );
      } catch (e) {
        if (e is! AgoraRtmException) {
          debugPrint('[RtmLock.getLocks] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtmClient.release();
    },
  );

  testWidgets(
    'RtmLock.removeLock',
    (WidgetTester tester) async {
      final rtmClient = await _createBindingRtmClient();
      await rtmClient.setParameters('{"rtm.log_filter":2063}');
      final rtmLock = RtmLockImpl(rtmClient.getIrisMethodChannel());

      try {
        String channelName = "hello";
        RtmChannelType channelType = RtmChannelType.none;
        String lockName = "hello";
        await rtmLock.removeLock(
          channelName: channelName,
          channelType: channelType,
          lockName: lockName,
        );
      } catch (e) {
        if (e is! AgoraRtmException) {
          debugPrint('[RtmLock.removeLock] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtmClient.release();
    },
  );

  testWidgets(
    'RtmLock.acquireLock',
    (WidgetTester tester) async {
      final rtmClient = await _createBindingRtmClient();
      await rtmClient.setParameters('{"rtm.log_filter":2063}');
      final rtmLock = RtmLockImpl(rtmClient.getIrisMethodChannel());

      try {
        String channelName = "hello";
        RtmChannelType channelType = RtmChannelType.none;
        String lockName = "hello";
        bool retry = true;
        await rtmLock.acquireLock(
          channelName: channelName,
          channelType: channelType,
          lockName: lockName,
          retry: retry,
        );
      } catch (e) {
        if (e is! AgoraRtmException) {
          debugPrint('[RtmLock.acquireLock] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtmClient.release();
    },
  );

  testWidgets(
    'RtmLock.releaseLock',
    (WidgetTester tester) async {
      final rtmClient = await _createBindingRtmClient();
      await rtmClient.setParameters('{"rtm.log_filter":2063}');
      final rtmLock = RtmLockImpl(rtmClient.getIrisMethodChannel());

      try {
        String channelName = "hello";
        RtmChannelType channelType = RtmChannelType.none;
        String lockName = "hello";
        await rtmLock.releaseLock(
          channelName: channelName,
          channelType: channelType,
          lockName: lockName,
        );
      } catch (e) {
        if (e is! AgoraRtmException) {
          debugPrint('[RtmLock.releaseLock] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtmClient.release();
    },
  );

  testWidgets(
    'RtmLock.revokeLock',
    (WidgetTester tester) async {
      final rtmClient = await _createBindingRtmClient();
      await rtmClient.setParameters('{"rtm.log_filter":2063}');
      final rtmLock = RtmLockImpl(rtmClient.getIrisMethodChannel());

      try {
        String channelName = "hello";
        RtmChannelType channelType = RtmChannelType.none;
        String lockName = "hello";
        String owner = "hello";
        await rtmLock.revokeLock(
          channelName: channelName,
          channelType: channelType,
          lockName: lockName,
          owner: owner,
        );
      } catch (e) {
        if (e is! AgoraRtmException) {
          debugPrint('[RtmLock.revokeLock] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtmClient.release();
    },
  );
}
